import 'package:bloc_contacts/repositories/contact_repository.dart';
import 'package:flutter_test/flutter_test.dart';
import 'package:http/http.dart' as http;
import 'package:mocktail/mocktail.dart';

class ClientMock extends Mock implements http.Client {}

void main() {
  final client = ClientMock();
  final repository = ContactRepositoryImpl(client);

  test('Get a contact list', () async {
    when(() => client.get(Uri.parse(
            'https://640a804881d8a32198c98f02.mockapi.io/api/contacts')))
        .thenAnswer((_) async => http.Response(contactBody, 200));

    final list = await repository.getAll();

    expect(list.isNotEmpty, equals(true));
  });

  test('Should be return a exception if status code not equal 200', () async {
    when(() => client.get(Uri.parse(
            'https://640a804881d8a32198c98f02.mockapi.io/api/contacts')))
        .thenAnswer((_) async => http.Response(contactBody, 404));

    expect(() async => await repository.getAll(), throwsException);
  });
}

const contactBody =
    '[{"createdAt":"2023-03-09T04:04:39.567Z","name":"Madeline Schaden Sr.","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/762.jpg","phone":"(277) 273-5567","id":"1"},{"createdAt":"2023-03-09T11:12:33.412Z","name":"Felicia Feeney","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/1233.jpg","phone":"1-857-509-6590 x0753","id":"2"},{"createdAt":"2023-03-09T21:45:14.449Z","name":"Leonard Moen","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/1231.jpg","phone":"733-638-0286","id":"3"},{"createdAt":"2023-03-09T03:54:57.726Z","name":"Sonja Smitham","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/1224.jpg","phone":"1-831-546-0791 x983","id":"4"},{"createdAt":"2023-03-09T15:13:15.951Z","name":"Susan Pfannerstill","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/140.jpg","phone":"574-606-5074","id":"5"},{"createdAt":"2023-03-09T02:20:16.309Z","name":"Vernon Rice","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/1044.jpg","phone":"267.579.9001 x78361","id":"6"},{"createdAt":"2023-03-09T05:26:33.573Z","name":"Ruben Heathcote Jr.","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/162.jpg","phone":"1-622-829-2131","id":"7"},{"createdAt":"2023-03-09T02:02:55.254Z","name":"Eula Schinner V","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/766.jpg","phone":"(841) 292-7570 x54306","id":"8"},{"createdAt":"2023-03-09T18:05:25.692Z","name":"Maureen Schultz","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/696.jpg","phone":"769-533-4134 x44834","id":"9"},{"createdAt":"2023-03-09T12:15:31.760Z","name":"Harry Walsh","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/821.jpg","phone":"222.775.1650 x2621","id":"10"},{"createdAt":"2023-03-09T22:14:15.927Z","name":"Miss Sherri Weimann","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/853.jpg","phone":"468.315.2266","id":"11"},{"createdAt":"2023-03-09T14:39:41.709Z","name":"Cynthia Treutel","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/1095.jpg","phone":"1-254-458-2337 x80508","id":"12"},{"createdAt":"2023-03-09T07:56:45.115Z","name":"Wayne Gutkowski II","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/149.jpg","phone":"1-962-325-7811 x72321","id":"13"},{"createdAt":"2023-03-09T21:53:24.093Z","name":"Calvin Nader","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/52.jpg","phone":"(773) 809-0937 x95686","id":"14"},{"createdAt":"2023-03-09T09:35:00.287Z","name":"Sheryl Hane DVM","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/809.jpg","phone":"(269) 327-3876","id":"15"},{"createdAt":"2023-03-09T02:30:19.815Z","name":"Beatrice Daniel","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/1160.jpg","phone":"550.982.5340 x3619","id":"16"},{"createdAt":"2023-03-10T00:41:38.279Z","name":"Catherine Hahn","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/145.jpg","phone":"(652) 912-5868 x51876","id":"17"},{"createdAt":"2023-03-09T11:09:27.924Z","name":"Faye Moore","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/914.jpg","phone":"(523) 241-6513 x2079","id":"18"},{"createdAt":"2023-03-09T21:44:31.882Z","name":"Charlene Crist","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/85.jpg","phone":"(510) 461-6326 x24914","id":"19"},{"createdAt":"2023-03-09T06:11:19.707Z","name":"Colin Jakubowski","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/328.jpg","phone":"(564) 430-4050 x9744","id":"20"},{"createdAt":"2023-03-09T06:02:43.645Z","name":"Dr. Rosa Toy MD","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/387.jpg","phone":"(257) 846-2062 x5769","id":"21"},{"createdAt":"2023-03-10T00:51:37.841Z","name":"Mrs. Elias Spinka","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/786.jpg","phone":"1-692-713-9346 x7189","id":"22"},{"createdAt":"2023-03-09T16:54:47.798Z","name":"Inez Davis","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/152.jpg","phone":"1-740-827-2693","id":"23"},{"createdAt":"2023-03-09T16:41:47.701Z","name":"Angel Buckridge","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/611.jpg","phone":"785-272-2238 x7926","id":"24"},{"createdAt":"2023-03-09T05:09:52.840Z","name":"Rickey Ondricka","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/1073.jpg","phone":"739-754-4348","id":"25"},{"createdAt":"2023-03-09T14:32:56.320Z","name":"Jeannette Hegmann","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/529.jpg","phone":"1-827-869-8122 x86070","id":"26"},{"createdAt":"2023-03-09T22:22:22.830Z","name":"Carlton Willms","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/305.jpg","phone":"541.865.1774 x02038","id":"27"},{"createdAt":"2023-03-09T21:02:41.293Z","name":"Billy Little","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/1105.jpg","phone":"575-823-8460","id":"28"},{"createdAt":"2023-03-09T02:04:07.946Z","name":"Rhonda Connelly","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/471.jpg","phone":"278.603.1097","id":"29"},{"createdAt":"2023-03-09T10:51:59.263Z","name":"Jessie Abbott","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/952.jpg","phone":"1-399-355-6373","id":"30"},{"createdAt":"2023-03-09T12:19:46.588Z","name":"Latoya Bayer","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/466.jpg","phone":"945.644.1165 x7296","id":"31"},{"createdAt":"2023-03-09T11:34:36.261Z","name":"Derrick Schmitt","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/37.jpg","phone":"(781) 461-2611","id":"32"},{"createdAt":"2023-03-09T13:04:06.170Z","name":"Ollie Trantow MD","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/840.jpg","phone":"632.846.7197 x33266","id":"33"},{"createdAt":"2023-03-09T14:33:57.394Z","name":"Marcella Runolfsdottir","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/721.jpg","phone":"807-844-5219","id":"34"},{"createdAt":"2023-03-09T07:33:08.206Z","name":"Lloyd Spencer","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/962.jpg","phone":"(842) 642-8526 x1976","id":"35"},{"createdAt":"2023-03-09T17:59:42.230Z","name":"Rick Hudson","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/731.jpg","phone":"924.943.7466 x44829","id":"36"},{"createdAt":"2023-03-09T05:54:49.944Z","name":"Luther Hyatt","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/977.jpg","phone":"1-851-810-6146 x79423","id":"37"},{"createdAt":"2023-03-09T13:29:59.252Z","name":"Wendell Gerlach","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/1154.jpg","phone":"579.654.1093 x8202","id":"38"},{"createdAt":"2023-03-09T15:18:02.650Z","name":"Bessie DuBuque I","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/199.jpg","phone":"576-310-9327","id":"39"},{"createdAt":"2023-03-09T12:35:34.910Z","name":"Arturo Purdy","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/970.jpg","phone":"709.942.5437 x000","id":"40"},{"createdAt":"2023-03-09T21:49:41.174Z","name":"Ebony Douglas","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/986.jpg","phone":"718-361-8137","id":"41"},{"createdAt":"2023-03-09T07:11:42.840Z","name":"Essie Abshire MD","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/1190.jpg","phone":"1-915-872-2946","id":"42"},{"createdAt":"2023-03-09T08:20:55.984Z","name":"Roberto Nicolas","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/1071.jpg","phone":"220-485-3300 x3023","id":"43"},{"createdAt":"2023-03-09T13:52:20.628Z","name":"Marcos Swift","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/603.jpg","phone":"487-987-5331 x157","id":"44"},{"createdAt":"2023-03-09T10:18:16.937Z","name":"Casey Jaskolski","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/700.jpg","phone":"1-536-300-5713 x153","id":"45"},{"createdAt":"2023-03-09T17:12:22.690Z","name":"Rachael Padberg","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/1157.jpg","phone":"(968) 377-7206 x93317","id":"46"},{"createdAt":"2023-03-09T07:58:43.756Z","name":"Wanda Renner DDS","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/784.jpg","phone":"1-948-751-3735 x3681","id":"47"},{"createdAt":"2023-03-09T21:30:09.840Z","name":"Jamie Schmitt","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/125.jpg","phone":"587.472.1603","id":"48"},{"createdAt":"2023-03-09T05:22:01.088Z","name":"Rhonda Anderson","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/245.jpg","phone":"644-895-3333 x3069","id":"49"},{"createdAt":"2023-03-09T02:39:44.538Z","name":"Stanley Bergnaum","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/702.jpg","phone":"1-409-835-6560","id":"50"},{"createdAt":"2023-03-09T08:30:50.994Z","name":"Heather Lueilwitz","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/1091.jpg","phone":"662-734-4259 x02956","id":"51"},{"createdAt":"2023-03-09T06:48:28.931Z","name":"Laura Bergnaum","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/1215.jpg","phone":"(213) 849-2022 x933","id":"52"},{"createdAt":"2023-03-09T13:37:35.386Z","name":"Dr. Velma Thompson","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/506.jpg","phone":"738.828.0956","id":"53"},{"createdAt":"2023-03-09T17:35:35.894Z","name":"Geneva Leffler","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/1216.jpg","phone":"828.683.9633 x61610","id":"54"},{"createdAt":"2023-03-09T21:40:38.677Z","name":"Claudia Wisoky","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/96.jpg","phone":"230-905-2897 x497","id":"55"},{"createdAt":"2023-03-09T07:44:31.205Z","name":"Ron Raynor","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/37.jpg","phone":"1-370-508-8808 x136","id":"56"},{"createdAt":"2023-03-09T06:28:45.367Z","name":"Devin Connelly III","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/449.jpg","phone":"651-494-6693","id":"57"},{"createdAt":"2023-03-09T23:21:49.389Z","name":"Geoffrey Blick MD","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/676.jpg","phone":"855-547-8988 x18361","id":"58"},{"createdAt":"2023-03-09T04:02:14.977Z","name":"Darlene Bergstrom","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/164.jpg","phone":"596-917-5779","id":"59"},{"createdAt":"2023-03-09T01:14:19.694Z","name":"Rhonda Muller","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/591.jpg","phone":"(389) 262-3655 x05657","id":"60"},{"createdAt":"2023-03-09T11:25:28.035Z","name":"Francis Mraz","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/127.jpg","phone":"1-423-441-7377 x21477","id":"61"},{"createdAt":"2023-03-09T23:54:17.616Z","name":"Mildred Batz","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/582.jpg","phone":"1-620-418-1222 x89514","id":"62"},{"createdAt":"2023-03-09T22:14:18.280Z","name":"Thomas Treutel","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/453.jpg","phone":"1-635-696-7620 x752","id":"63"},{"createdAt":"2023-03-09T02:55:05.540Z","name":"Nettie Daugherty","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/136.jpg","phone":"227-827-3807 x26672","id":"64"},{"createdAt":"2023-03-09T08:41:38.966Z","name":"Traci Maggio","avatar":"https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/37.jpg","phone":"1-517-956-0662 x79525","id":"65"}]';
